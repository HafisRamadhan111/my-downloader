<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Downloader Sakti</title>
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; }
        input { width: 90%; padding: 10px; margin-bottom: 10px; }
        button { padding: 10px 20px; background: blue; color: white; border: none; }
        img { max-width: 100%; margin: 10px 0; border-radius: 10px; }
        #result { display: none; margin-top: 20px; }
        .btn-dl { background: green; text-decoration: none; padding: 10px; color: white; display: block; }
    </style>
</head>
<body>
    <h2>ðŸš€ TikTok/IG/YT Downloader</h2>
    <input type="text" id="link" placeholder="Tempel Link Video...">
    <button onclick="gas()">DOWNLOAD</button>
    <p id="status"></p>

    <div id="result">
        <h3 id="judul"></h3>
        <img id="thumb" src="">
        <a id="dl_btn" class="btn-dl" target="_blank">Download MP4</a>
    </div>

    <script>
        // NANTI GANTI LINK DI BAWAH INI SETELAH RENDER JADI
        const API_URL = "http://localhost:8000/api/download"; 

        async function gas() {
            document.getElementById('status').innerText = "Sedang memproses (Tunggu 1 menit jika server tidur)...";
            document.getElementById('result').style.display = 'none';
            
            try {
                const res = await fetch(API_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({url: document.getElementById('link').value})
                });
                const data = await res.json();
                
                if(data.status == 'success'){
                    document.getElementById('status').innerText = "";
                    document.getElementById('judul').innerText = data.title;
                    document.getElementById('thumb').src = data.thumb;
                    document.getElementById('dl_btn').href = data.url;
                    document.getElementById('result').style.display = 'block';
                } else {
                    document.getElementById('status').innerText = "Gagal: " + data.msg;
                }
            } catch(e) {
                document.getElementById('status').innerText = "Error: Server belum nyala/salah link.";
            }
        }
    </script>
</body>
</html>
